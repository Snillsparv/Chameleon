<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Herd Mentality - AniJonas Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0f172a">

    <style>
        :root {
            --bg-overlay: rgba(15, 23, 42, 0.85);
            --card: rgba(30, 41, 59, 0.8);
            --primary: #818cf8;
            --accent: #f472b6; 
            --winner-gold: #fbbf24;
            --text: #f8fafc;
            --glass: rgba(255, 255, 255, 0.05);
        }

        * { box-sizing: border-box; transition: all 0.3s ease; }
        
        body {
            font-family: 'Outfit', sans-serif;
            background-color: #0f172a;
            /* Se till att din bakgrundsbild heter background.png */
            background-image: linear-gradient(var(--bg-overlay), var(--bg-overlay)), url('background.png');
            background-size: cover;
            background-position: center center;
            background-attachment: fixed;
            color: var(--text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        /* HUVUDBEH√ÖLLARE MED DELAY-EFFEKT */
        .container {
            width: 95%;
            max-width: 500px;
            background: var(--card);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 40px 30px;
            border-radius: 32px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            text-align: center;
            
            /* Startar osynlig och dimmar upp efter 1 sekund */
            opacity: 0;
            animation: startFadeIn 1.5s ease-out forwards;
            animation-delay: 1s; 
        }

        @keyframes startFadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .neon-cow {
            width: 130px;
            height: auto;
            margin: 0 auto 20px;
            display: block;
            color: var(--accent);
            filter: drop-shadow(0 0 15px var(--accent));
        }

        h1 { font-weight: 800; font-size: 2.5rem; margin: 0 0 10px; background: linear-gradient(to right, var(--primary), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        p { color: #94a3b8; margin-bottom: 25px; }

        .btn { 
            background: linear-gradient(135deg, var(--primary), var(--accent)); 
            color: white; border: none; padding: 18px; border-radius: 18px; 
            font-weight: 700; cursor: pointer; width: 100%; font-size: 1.1rem;
            margin-top: 15px; box-shadow: 0 10px 20px -5px rgba(129, 140, 248, 0.5);
        }
        .btn:active { transform: scale(0.98); }

        .btn-lang { background: rgba(255, 255, 255, 0.1); border: 1px solid var(--primary); margin-bottom: 10px; }

        input { background: rgba(15, 23, 42, 0.8); border: 1px solid #334155; color: white; padding: 16px; border-radius: 14px; width: 100%; text-align: center; font-size: 1.2rem; margin-top: 10px; }

        .question-box { background: rgba(15, 23, 42, 0.6); padding: 35px 25px; border-radius: 24px; border: 2px solid var(--primary); font-size: 1.6rem; font-weight: 700; margin: 25px 0; color: white; line-height: 1.3; }

        .score-row { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 18px; margin-bottom: 12px; border: 2px solid transparent; }
        .score-row.has-cow { border-color: var(--accent); background: rgba(244, 114, 182, 0.2); }
        
        .cow-btn { background: #1e293b; border: none; padding: 10px; border-radius: 12px; cursor: pointer; font-size: 1.4rem; width: 50px; }
        .cow-btn.active { background: var(--accent); box-shadow: 0 0 15px var(--accent); }
        
        .point-btn { background: var(--primary); border: none; color: white; width: 50px; height: 50px; border-radius: 14px; font-weight: 800; cursor: pointer; }
        .point-btn:disabled { opacity: 0.3; cursor: not-allowed; }

        .video-wrapper { width: 100%; border-radius: 24px; overflow: hidden; border: 2px solid var(--accent); margin-bottom: 20px; background: #000; }
        video { width: 100%; display: block; }

        .hidden { display: none !important; }
        
        /* Interna sk√§rm-v√§xlingar (snabbare √§n start-infasningen) */
        .screen-animate { animation: fadeIn 0.4s forwards ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container" id="app">
    <div id="scr-language" class="screen-animate">
        <svg class="neon-cow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 2c-4 0-7 3-7 7 0 1.5.5 3 1 4.5C4.5 15 3 16.5 3 18c0 1.5 1 3 2.5 3.5C7 22.5 9.5 23 12 23s5-0.5 6.5-1.5c1.5-0.5 2.5-2 2.5-3.5 0-1.5-1.5-3-3-4.5.5-1.5 1-3 1-4.5C19 5 16 2 12 2z"/>
            <path d="M8 10h.01"/><path d="M16 10h.01"/><path d="M12 16v-2"/>
        </svg>
        <h1>Herd Mentality</h1>
        <p>V√§lj spr√•k / Choose language</p>
        <button class="btn btn-lang" onclick="setLanguage('sv')">Svenska</button>
        <button class="btn btn-lang" onclick="setLanguage('en')">English</button>
    </div>

    <div id="scr-setup" class="hidden screen-animate">
        <h1 id="txt-title">Herd Mentality</h1>
        <p id="txt-subtitle">...</p>
        <div style="text-align: left;">
            <label id="txt-pcount" style="font-weight: 600;">Antal spelare:</label>
            <input type="number" id="pCount" value="4" min="3" max="10">
        </div>
        <button class="btn" id="btn-continue" onclick="setupNames()">Forts√§tt</button>
    </div>

    <div id="scr-names" class="hidden screen-animate">
        <h1 id="txt-names-title">Namn</h1>
        <div id="name-container"></div>
        <button class="btn" id="btn-start" onclick="initGame()">Starta</button>
    </div>

    <div id="scr-question" class="hidden screen-animate">
        <p id="roundTitle" style="font-weight: 800; color: var(--primary);">RUNDA 1</p>
        <div class="question-box" id="qDisplay">...</div>
        <button class="btn" id="btn-scoring" onclick="showScoring()">R√§tta</button>
    </div>

    <div id="scr-scoring" class="hidden screen-animate">
        <h1 id="txt-scoring-title">Po√§ng</h1>
        <p id="txt-scoring-sub">...</p>
        <div id="scoring-list"></div>
        <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button class="btn" id="btn-finish" style="flex: 1; background: var(--glass);" onclick="triggerFinal()">Avsluta</button>
            <button class="btn" id="btn-next" style="flex: 2; margin-top: 0;" onclick="nextRound()">N√§sta</button>
        </div>
    </div>

    <div id="scr-video" class="hidden screen-animate">
        <h1 id="txt-video-title">Finalen...</h1>
        <div class="video-wrapper">
            <video id="victoryVideo" playsinline><source src="video.mp4" type="video/mp4"></video>
        </div>
        <button class="btn" id="btn-skip" onclick="finishVideo()">Skippa</button>
    </div>

    <div id="scr-final" class="hidden screen-animate">
        <h1 id="grandWinner" style="font-size: 3.5rem; color: var(--winner-gold);">Namn</h1>
        <div id="final-ranking"></div>
        <button class="btn" id="btn-again" onclick="location.reload()">Spela igen</button>
    </div>
</div>

<script>
    const data = {
        sv: {
            title: "Herd Mentality", subtitle: "T√§nk som flocken. Undvik att bli den rosa kon!", pcount: "Antal spelare:", continue: "Forts√§tt", namesTitle: "Spelarnamn", start: "Starta spelet", round: "RUNDA", scoring: "R√§tta svar", scoringTitle: "Po√§ngs√§ttning", scoringSub: "Ge po√§ng till majoriteten. Markera vem som √§r <b>Rosa Kon</b> üêÆ", finish: "Avsluta", next: "N√§sta runda", videoTitle: "Finalen...", skip: "Hoppa √∂ver", again: "Spela igen", ranking: "Slutst√§llning:", pts: "po√§ng",
            questions: ["B√§sta pizzan?", "Mest irriterande instrument?", "B√§sta superkraften?", "Coolaste djuret?", "B√§sta frukten?", "B√§sta veckodagen?", "En k√§nd trollkarl?", "B√§sta glassen?", "Land med b√§st mat?", "En popul√§r sport?", "B√§sta filmgenren?", "Vanligt hundnamn?", "B√§sta s√§ttet att resa?", "N√•got i badrummet?", "B√§sta chokladen?", "En popul√§r app?", "B√§sta frukosten?", "Ett tr√•kigt skol√§mne?", "B√§sta br√§dspelet?", "En planet?", "B√§sta l√§sken?", "K√§ndis alla gillar?", "B√§sta Disneyfilmen?", "G√∂rs innan man sover?", "B√§sta h√∂gtiden?", "Sv√•rskalad frukt?", "B√§sta uppfinningen?", "Stad man vill bes√∂ka?", "B√§sta burgaren?", "Roligt men sv√•rt jobb?", "B√§sta kakan?", "Vanlig krydda?", "B√§sta s√∂ndagssysslan?", "Ett legendariskt v√§sen?", "B√§sta bilf√§rgen?", "Gr√∂nsak barn hatar?", "B√§sta 80-talsl√•ten?", "N√•got man alltid tappar bort?", "Anledning att komma sent?", "B√§sta br√∂det?", "G√∂rs n√§r man har tr√•kigt?", "B√§sta pommes fritesen?", "B√§sta tecknade serien?", "N√•got man g√∂r p√• br√∂llop?", "B√§sta n√∂ten?", "Ett vackert spr√•k?", "B√§sta telefonen?", "N√•got till stranden?", "B√§sta pastan?", "En k√§nd idrottare?", "B√§sta sitcomen?", "Kan inte leva utan?", "B√§sta t√•rtan?"]
        },
        en: {
            title: "Herd Mentality", subtitle: "Think like the herd. Don't be the Pink Cow!", pcount: "Number of players:", continue: "Continue", namesTitle: "Player Names", start: "Start Game", round: "ROUND", scoring: "Go to Scoring", scoringTitle: "Scoring Phase", scoringSub: "Award points to the majority. Mark the <b>Pink Cow</b> üêÆ", finish: "Finish Game", next: "Next Round", videoTitle: "The Finale...", skip: "Skip Video", again: "Play Again", ranking: "Final Standings:", pts: "points",
            questions: ["Best pizza topping?", "Most annoying instrument?", "Best superpower?", "Coolest animal?", "Best fruit?", "Best day of the week?", "A famous wizard?", "Best ice cream flavor?", "Country with best food?", "A popular sport?", "Best movie genre?", "Common dog name?", "Best way to travel?", "Something in a bathroom?", "Best chocolate bar?", "A popular app?", "Best breakfast food?", "Boring school subject?", "Best board game?", "A planet?", "Best soda?", "Celebrity everyone likes?", "Best Disney movie?", "Done before sleeping?", "Best holiday?", "Fruit hard to peel?", "Best invention?", "City to visit?", "Best burger?", "Fun but hard job?", "Best cookie?", "Common spice?", "Best Sunday activity?", "Legendary creature?", "Best car color?", "Vegetable kids hate?", "Best 80s song?", "Something you always lose?", "Reason to be late?", "Best bread?", "Done when bored?", "Best fries?", "Best cartoon?", "Done at weddings?", "Best nut?", "Beautiful language?", "Best phone brand?", "Taken to the beach?", "Best pasta shape?", "Famous athlete?", "Best sitcom?", "Can't live without?", "Best cake?"]
        }
    };

    let players = [], roundNum = 0, shuffledQ = [], pinkCowIndex = -1, lang = 'sv';

    function setLanguage(l) {
        lang = l;
        document.getElementById('txt-title').innerText = data[lang].title;
        document.getElementById('txt-subtitle').innerText = data[lang].subtitle;
        document.getElementById('txt-pcount').innerText = data[lang].pcount;
        document.getElementById('btn-continue').innerText = data[lang].continue;
        switchScreen('scr-language', 'scr-setup');
    }

    function setupNames() {
        const count = document.getElementById('pCount').value;
        const container = document.getElementById('name-container');
        container.innerHTML = '';
        for(let i=0; i<count; i++) container.innerHTML += `<input type="text" id="pName${i}" placeholder="${lang === 'sv' ? 'Namn' : 'Name'} ${i+1}">`;
        switchScreen('scr-setup', 'scr-names');
        shuffledQ = [...data[lang].questions].sort(() => Math.random() - 0.5);
    }

    function initGame() {
        const count = document.getElementById('pCount').value;
        for(let i=0; i<count; i++) players.push({ name: document.getElementById(`pName${i}`).value || `P${i+1}`, score: 0 });
        startRound();
    }

    function startRound() {
        roundNum++;
        document.getElementById('roundTitle').innerText = `${data[lang].round} ${roundNum}`;
        document.getElementById('qDisplay').innerText = shuffledQ[roundNum - 1] || (lang === 'sv' ? "Slut!" : "Finished!");
        switchScreen(activeScreen(), 'scr-question');
    }

    function showScoring() {
        const list = document.getElementById('scoring-list');
        list.innerHTML = '';
        players.forEach((p, i) => {
            const hasCow = (i === pinkCowIndex);
            list.innerHTML += `<div class="score-row ${hasCow ? 'has-cow' : ''}"><button class="cow-btn ${hasCow ? 'active' : ''}" onclick="toggleCow(${i})">üêÆ</button><span style="flex:1; text-align:left; margin-left:15px;">${p.name}</span><button class="point-btn" id="ptBtn${i}" ${hasCow ? 'disabled' : ''} onclick="awardPoint(${i})">+1</button></div>`;
        });
        document.getElementById('txt-scoring-title').innerText = data[lang].scoringTitle;
        document.getElementById('txt-scoring-sub').innerHTML = data[lang].scoringSub;
        document.getElementById('btn-finish').innerText = data[lang].finish;
        document.getElementById('btn-next').innerText = data[lang].next;
        switchScreen('scr-question', 'scr-scoring');
    }

    function awardPoint(idx) { players[idx].score++; const b = document.getElementById(`ptBtn${idx}`); b.innerText = "‚úì"; b.disabled = true; }
    function toggleCow(idx) { pinkCowIndex = (pinkCowIndex === idx) ? -1 : idx; showScoring(); }
    function nextRound() { startRound(); }
    function triggerFinal() { 
        document.getElementById('txt-video-title').innerText = data[lang].videoTitle;
        document.getElementById('btn-skip').innerText = data[lang].skip;
        switchScreen('scr-scoring', 'scr-video'); 
        const v = document.getElementById('victoryVideo'); v.play().catch(()=>{}); v.onended = finishVideo; 
    }
    function finishVideo() { document.getElementById('victoryVideo').pause(); switchScreen('scr-video', 'scr-final'); showFinalWinner(); }
    function showFinalWinner() {
        const s = [...players].sort((a,b)=>b.score-a.score);
        document.getElementById('grandWinner').innerText = s[0].name;
        document.getElementById('btn-again').innerText = data[lang].again;
        const r = document.getElementById('final-ranking');
        r.innerHTML = `<h3 style="color:var(--primary); margin-bottom:15px;">${data[lang].ranking}</h3>`;
        s.forEach((p, i) => {
            r.innerHTML += `<div class="score-row" style="background:var(--glass)"><span>${i+1}. ${p.name}</span><b>${p.score} ${data[lang].pts}</b></div>`;
        });
    }

    function switchScreen(from, to) {
        document.getElementById(from).classList.add('hidden');
        document.getElementById(to).classList.remove('hidden');
    }

    function activeScreen() {
        const ids = ['scr-language', 'scr-setup', 'scr-names', 'scr-question', 'scr-scoring', 'scr-video'];
        for(let id of ids) if(!document.getElementById(id).classList.contains('hidden')) return id;
        return 'scr-language';
    }
</script>
</body>
</html>